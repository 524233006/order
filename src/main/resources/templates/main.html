<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>统计</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link href="../static/css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}" rel="stylesheet"/>
    <link href="../static/css/main/animate.min.css" th:href="@{/css/main/animate.min.css}" rel="stylesheet"/>
    <link href="../static/css/main/style.min862f.css" th:href="@{/css/main/style.min862f.css}" rel="stylesheet"/>
    <script th:src="@{/js/jquery.min.js}"></script>
     <script src="../static/js/jquery.min.js" th:src="@{/js/echarts.js}"></script>
	<script th:inline="javascript"> var ctx = [[@{/}]]; </script>
</head>

<body class="gray-bg">
<div class="wrapper wrapper-content">

    <div class="row">
        <div class="col-sm-3">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <span class="label label-success pull-right">总交易量</span>
                    <h5>收入</h5>
                </div>
                <div class="ibox-content">
                    <h1 class="no-margins" th:text="${order.totalMoney}"></h1>
                    <div class="stat-percent font-bold text-success">98% <i class="fa fa-bolt"></i>
                    </div>
                    <small>总收入</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <span class="label label-info pull-right">订购人数</span>
                    <h5>合计</h5>
                </div>
                <div class="ibox-content">
                    <h1 class="no-margins" th:text="${order.num}"></h1>
                    <div class="stat-percent font-bold text-info">20% <i class="fa fa-level-up"></i>
                    </div>
                    <small>新订单</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <span class="label label-primary pull-right">今天</span>
                    <h5>订购人数</h5>
                </div>
                <div class="ibox-content">
                    <h1 class="no-margins" th:text="${today.num}"></h1>
                    <div class="stat-percent font-bold text-navy">44% <i class="fa fa-level-up"></i>
                    </div>
                    <small>新订单</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <span class="label label-primary pull-right">今天</span>
                    <h5>订单金额</h5>
                </div>
                <div class="ibox-content">
                    <h1 class="no-margins" th:text="${today.totalMoney}"></h1>
                    <div class="stat-percent font-bold text-navy">44% <i class="fa fa-level-up"></i>
                    </div>
                    <small>新订单</small>
                </div>
            </div>
        </div>
        <!-- <div class="col-sm-3">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <span class="label label-danger pull-right">最近一个月</span>
                    <h5>活跃用户</h5>
                </div>
                <div class="ibox-content">
                    <h1 class="no-margins">80,600</h1>
                    <div class="stat-percent font-bold text-danger">38% <i class="fa fa-level-down"></i>
                    </div>
                    <small>12月</small>
                </div>
            </div>
        </div> -->
    </div>

    <div class="row" >
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>订单</h5>
                    <div class="pull-right">
                        <div class="btn-group">
                            <button type="button" class="btn btn-xs btn-white active">天</button>
                            <button type="button" class="btn btn-xs btn-white">月</button>
                            <button type="button" class="btn btn-xs btn-white">年</button>
                        </div>
                    </div>
                </div>
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-sm-9">
                            <div class="flot-chart">
                               <!--  <div class="flot-chart-content" id="flot-dashboard-chart"></div> -->
                            <div id="main" style="width: 600px;height:200px;"></div>
                            </div>
                            
                        </div>
                        <div class="col-sm-3" style="display:none">
                            <ul class="stat-list">
                                <li>
                                    <h2 class="no-margins"></h2>
                                    <small>订单总数</small>
                                    <div class="stat-percent">48% <i class="fa fa-level-up text-navy"></i>
                                    </div>
                                    <div class="progress progress-mini">
                                        <div style="width: 48%;" class="progress-bar"></div>
                                    </div>
                                </li>
                                <li>
                                    <h2 class="no-margins "></h2>
                                    <small>最近一个月订单</small>
                                    <div class="stat-percent">60% <i class="fa fa-level-down text-navy"></i>
                                    </div>
                                    <div class="progress progress-mini">
                                        <div style="width: 60%;" class="progress-bar"></div>
                                    </div>
                                </li>
                                <li>
                                    <h2 class="no-margins "></h2>
                                    <small>最近一个月销售额</small>
                                    <div class="stat-percent">22% <i class="fa fa-bolt text-navy"></i>
                                    </div>
                                    <div class="progress progress-mini">
                                        <div style="width: 22%;" class="progress-bar"></div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
	
<!--     <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>用户项目列表</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <table class="table table-hover no-margins">
                        <thead>
                        <tr>
                            <th>状态</th>
                            <th>日期</th>
                            <th>用户</th>
                            <th>值</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><small>进行中...</small>
                            </td>
                            <td><i class="fa fa-clock-o"></i> 11:20</td>
                            <td>青衣5858</td>
                            <td class="text-navy"> <i class="fa fa-level-up"></i> 24%</td>
                        </tr>
                        <tr>
                            <td><span class="label label-warning">已取消</span>
                            </td>
                            <td><i class="fa fa-clock-o"></i> 10:40</td>
                            <td>徐子崴</td>
                            <td class="text-navy"> <i class="fa fa-level-up"></i> 66%</td>
                        </tr>
                        <tr>
                            <td><small>进行中...</small>
                            </td>
                            <td><i class="fa fa-clock-o"></i> 01:30</td>
                            <td>姜岚昕</td>
                            <td class="text-navy"> <i class="fa fa-level-up"></i> 54%</td>
                        </tr>
                        <tr>
                            <td><small>进行中...</small>
                            </td>
                            <td><i class="fa fa-clock-o"></i> 02:20</td>
                            <td>武汉大兵哥</td>
                            <td class="text-navy"> <i class="fa fa-level-up"></i> 12%</td>
                        </tr>
                        <tr>
                            <td><small>进行中...</small>
                            </td>
                            <td><i class="fa fa-clock-o"></i> 09:40</td>
                            <td>荆莹儿</td>
                            <td class="text-navy"> <i class="fa fa-level-up"></i> 22%</td>
                        </tr>
                        <tr>
                            <td><span class="label label-primary">已完成</span>
                            </td>
                            <td><i class="fa fa-clock-o"></i> 04:10</td>
                            <td>栾某某</td>
                            <td class="text-navy"> <i class="fa fa-level-up"></i> 66%</td>
                        </tr>
                        <tr>
                            <td><small>进行中...</small>
                            </td>
                            <td><i class="fa fa-clock-o"></i> 12:08</td>
                            <td>范范范二妮</td>
                            <td class="text-navy"> <i class="fa fa-level-up"></i> 23%</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div> -->
</div>
</div>
<script th:src="@{/js/jquery.min.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- <script th:src="@{/ajax/libs/flot/jquery.flot.js}"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts-all-3.js"></script> -->

<th:block th:include="include :: sparkline-js" />
<!-- <script type="text/javascript">
    $(document).ready(function () {
    	
        var creat_time=[];    //类别数组（实际用来盛放X轴坐标值）
        var nums=[];    //个数数组（实际用来盛放Y坐标值）
        $.ajax({
            type : "post",
            async : true,            //异步请求（同步请求将会锁住浏览器，用户其他操作必须等待请求完成才可以执行）
            url : ctx+ "app/getechartsData",    //请求发送到TestServlet处
            dataType : "json",        //返回数据形式为json
           
            success : function(result) {
            	debugger;
                //请求成功时执行该函数内容，result即为服务器返回的json对象
                if (result.data.length!=0) {
                		debugger;
                       for(var i=0;i<result.data.length;i++){       
                    	  
                    	  creat_time.push(result.data[i].createTime);    //挨个取出类别并填入类别数组
                          nums.push(result.data[i].num);    //挨个取出个数并填入数组
                       }
                       alert(creat_time);      
                }else{
                	$("#main").hide();
                }
           },
            error : function(errorMsg) {
                //请求失败时执行该函数
            alert("图表请求数据失败!");
           
            }
       }) 
       
       var myChart = echarts.init(document.getElementById('main'));
        
        // 指定图表的配置项和数据    图标的数据可以从后台构造 然后传回前台
        var option = {
            title: {
                text: '订单'
            },
            tooltip: {},
            legend: {
                data:['销量']
            },
            xAxis: {
            	type : 'value',
                boundaryGap : false,
                data: creat_time  
            },
            yAxis: [ { // 纵轴标尺固定
                type : 'value',
                scale : true,
                max : 2,
                min : 0,
                splitNumber : 1
               
            } ],
            series: [{
                name: '销量',
                type: 'bar',
                data: nums
            }]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }
    
    );
</script> -->
<script type="text/javascript">
var myChart = echarts.init(document.getElementById('main'));
// 显示标题，图例和空的坐标轴
myChart.setOption({
    title: {
        text: '订单'
    },
    tooltip: {
        trigger: 'axis'
      },
    legend: {
        data:['']
    },
    xAxis: {
        data: []
    },
    yAxis : [
             {
                 type : 'value',
                 axisLabel : {
                     formatter: '{value} 个'
                 }
             }
         ],
    series: [{
        name: '个数',
        type: 'line',
        data: []
    }]
});

myChart.showLoading();    //数据加载完之前先显示一段简单的loading动画

var create_time=[];    //类别数组（实际用来盛放X轴坐标值）
var nums=[];    //个数数组（实际用来盛放Y坐标值）

$.ajax({
type : "post",
async : true,            //异步请求（同步请求将会锁住浏览器，用户其他操作必须等待请求完成才可以执行）
url : ctx+ "app/getechartsData",   //请求发送到TestServlet处
dataType : "json",        //返回数据形式为json
data:{"userId":'${user.id}'},
success : function(result) {
    //请求成功时执行该函数内容，result即为服务器返回的json对象
    if (result.data.length!=0) {
    	 
           for(var i=0;i<result.data.length;i++){       
        	   create_time.push(result.data[i].updateTime.substring(0,10));    //挨个取出类别并填入类别数组
            }
           for(var i=0;i<result.data.length;i++){       
               nums.push(result.data[i].num);    //挨个取出个数并填入数组
             }
           myChart.hideLoading();    //隐藏加载动画
           myChart.setOption({        //加载数据图表
               xAxis: {
                   data: create_time
               },
               series: [{
                   // 根据名字对应到相应的系列
                   name: '个数',
                   data: nums
               }]
           });
    }else{
    	$("#main").hide();
    }
},
error : function(errorMsg) {
    //请求失败时执行该函数
alert("图表请求数据失败!");
myChart.hideLoading();
}
}) 
</script>
</body>
</html>
